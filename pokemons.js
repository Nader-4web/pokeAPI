let pokemonList=[],batchSize=18,currentIndex=0,allDisplayedPokemonsHTML="",isFetchingData=!1;function apiCall(){!isFetchingData&&(isFetchingData=!0,Promise.all(Array.from({length:1010},(e,t)=>fetch(`https://api-pokemon-fr.vercel.app/api/v1/pokemon/${t+1}`).then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).catch(e=>{console.error("Error:",e)}))).then(e=>{pokemonList=e.filter(e=>void 0!==e),isFetchingData=!1,displayData(),search(e)}))}apiCall(),closeCard();const colours={Normal:"#A8A77A",Feu:"#EE8130",Eau:"#6390F0",Électrik:"#F7D02C",Plante:"#7AC74C",Glace:"#96D9D6",Combat:"#C22E28",Poison:"#A33EA1",Sol:"#E2BF65",Vol:"#A98FF3",Psy:"#F95587",Insecte:"#A6B91A",Roche:"#B6A136",Spectre:"#735797",Dragon:"#6F35FC",Ténèbres:"#705746",Acier:"#B7B7CE",Fée:"#D685AD"};let selectedPokemon;function displayData(){let e=pokemonList.slice(currentIndex,currentIndex+batchSize),t="";e.forEach(e=>{t+=`<div class="pokemon" style="background-color: ${colours[e.types[0].name]};">
        <p id="name">${e.name.fr}</p>
        <div id="img-container">
          <img id="imgPoke" src="${e.sprites.regular}">
        </div>
      </div>`});let n=document.getElementById("wrapper");n.innerHTML+=t,allDisplayedPokemonsHTML+=t,currentIndex+=batchSize,n.removeEventListener("click",handlePokemonClick),n.addEventListener("click",handlePokemonClick);let r=window.scrollY+290;r<550&&window.scrollTo(0,0),window.addEventListener("scroll",()=>{let e=window.innerHeight,t=document.body.scrollHeight,n=window.scrollY;n+e>=t&&displayData()})}function closeCard(){document.querySelector(".overlay").addEventListener("click",()=>{document.querySelector(".fiche").style.display="none",document.body.style.backgroundColor="#445",document.body.style.position="inherit",document.querySelector(".overlay").style.display="none"});document.getElementById("close-card").addEventListener("click",()=>{document.querySelector(".fiche").style.display="none",document.body.style.backgroundColor="#445",document.body.style.position="inherit",document.querySelector(".overlay").style.display="none"})}function handlePokemonClick(e){let t=e.target;if(t.closest(".pokemon")){let n=t.closest(".pokemon").querySelector("#name").innerText;selectedPokemon=pokemonList.find(e=>e.name.fr===n);let r=document.querySelector(".fiche");r.classList.add("fade-in");let s=window.scrollY+340;s<550&&(s=550),r.style.display="block",r.style.top=`${s}px`,document.querySelector(".overlay").style.display="block",getStats(selectedPokemon),getColorType(selectedPokemon),displayPokeInfo(selectedPokemon)}}function checkSearchBarPosition(){let e=document.getElementById("search-bar"),t=document.getElementById("top-of-page");e.offsetHeight;let n=window.scrollY;n>=300?(t.style.display="block",e.classList.add("fixed")):(e.classList.remove("fixed"),t.style.display="none")}function handleScroll(){window.scrollY,window.addEventListener("scroll",handleScroll)}function normalizeString(e){return e.toLowerCase().replace(/[^a-z0-9]/g,"")}function search(e){let t=document.getElementById("not-found");function n(){let n=document.getElementById("textvalue").value,r=e.find(e=>normalizeString(e.name.fr)===normalizeString(n)||e.pokedexId.toString()===n);if(r){let s=document.querySelector(".fiche"),l=window.scrollY+340;l<550&&(l=550),s.style.display="block",s.classList.add("fade-in"),s.style.top=`${l}px`,document.querySelector(".overlay").style.display="block",displayCardSearch(r),getColorTypeSearch(r),getStatsSearch(r),t.textContent=""}else t.classList.add("fade-in"),t.innerText="Pok\xe9mon introuvable !",setTimeout(()=>{t.innerText="",t.classList.remove("fade-in")},3e3)}document.getElementById("textvalue").addEventListener("keypress",e=>{"Enter"===e.key&&n()});document.getElementById("submit").addEventListener("click",n)}function getStats(e){let t=e.stats.atk,n=e.stats.def,r=e.stats.hp,s=e.stats.spe_atk,l=e.stats.spe_def,a=e.stats.vit,o=document.querySelector(".range-atk"),i=document.querySelector(".range-def"),c=document.querySelector(".range-hp"),d=document.querySelector(".range-spe-atk"),y=document.querySelector(".range-spe-def"),p=document.querySelector(".range-vit");document.querySelector(".stat-desc-atk").innerHTML="Atk: "+e.stats.atk,document.querySelector(".stat-desc-def").innerHTML="Def: "+e.stats.def,document.querySelector(".stat-desc-hp").innerHTML="Hp: "+e.stats.hp,document.querySelector(".stat-desc-spe-atk").innerHTML="Spe-atk: "+e.stats.spe_atk,document.querySelector(".stat-desc-spe-def").innerHTML="Spe-def: "+e.stats.spe_def,document.querySelector(".stat-desc-vit").innerHTML="Vit: "+e.stats.vit,o.style.width=`${t}%`,o.style.transition="width 0.5s ease-in-out",i.style.width=`${n}%`,i.style.transition="width 0.5s ease-in-out",c.style.width=`${r}%`,c.style.transition="width 0.5s ease-in-out",d.style.width=`${s}%`,d.style.transition="width 0.5s ease-in-out",y.style.width=`${l}%`,y.style.transition="width 0.5s ease-in-out",p.style.width=`${a}%`,p.style.transition="width 0.5s ease-in-out"}function displayPokeInfo(e){document.querySelector(".fiche").classList.add("fade-in");document.getElementById("img-poke-fiche").src=e.sprites.regular,document.getElementById("name-fiche").innerHTML=e.pokedexId.toString().padStart(3,"0")+"# "+e.name.fr;let t=document.querySelector(".block-img-element"),n=e.types.map(e=>{if(!e.image||!e.name)return null;{let t=document.createElement("img");return t.src=e.image,t}});t.innerHTML="";let r=document.querySelector(".block-type");n.forEach(e=>{e&&(t.appendChild(e),e.classList.add("img-element"))}),r.innerHTML="";let s=e.types.map(e=>{if(!e.name)return null;{let t=document.createElement("p");return t.classList.add("element"),t.innerHTML=e.name,t}});s.forEach(e=>{e&&r.appendChild(e)})}function getColorType(e){let t=document.querySelector(".fiche"),n=e.types[0].name;t.style.backgroundColor=colours[n]}function displayCardSearch(e){document.getElementById("name-fiche").innerHTML=e.pokedexId.toString().padStart(3,"0")+"# "+e.name.fr;document.getElementById("img-poke-fiche").src=e.sprites.regular;let t=document.querySelector(".block-img-element"),n=e.types.map(e=>{if(!e.image)return null;{let t=document.createElement("img");return t.src=e.image,t}});t.innerHTML="",n.forEach(e=>{e&&(t.appendChild(e),e.classList.add("img-element"))});let r=document.querySelector(".block-type");r.innerHTML="";let s=e.types.map(e=>{if(!e.name)return null;{let t=document.createElement("p");return t.classList.add("element"),t.innerHTML=e.name,t}});s.forEach(e=>{e&&r.appendChild(e)})}function getStatsSearch(e){let t=e.stats.atk,n=e.stats.def,r=e.stats.hp,s=e.stats.spe_atk,l=e.stats.spe_def,a=e.stats.vit,o=document.querySelector(".range-atk"),i=document.querySelector(".range-def"),c=document.querySelector(".range-hp"),d=document.querySelector(".range-spe-atk"),y=document.querySelector(".range-spe-def"),p=document.querySelector(".range-vit");document.querySelector(".stat-desc-atk").innerHTML="Atk: "+e.stats.atk,document.querySelector(".stat-desc-def").innerHTML="Def: "+e.stats.def,document.querySelector(".stat-desc-hp").innerHTML="Hp: "+e.stats.hp,document.querySelector(".stat-desc-spe-atk").innerHTML="Spe-atk: "+e.stats.spe_atk,document.querySelector(".stat-desc-spe-def").innerHTML="Spe-def: "+e.stats.spe_def,document.querySelector(".stat-desc-vit").innerHTML="Vit: "+e.stats.vit,o.style.width=`${t}%`,i.style.width=`${n}%`,c.style.width=`${r}%`,d.style.width=`${s}%`,y.style.width=`${l}%`,p.style.width=`${a}%`}function getColorTypeSearch(e){let t=document.querySelector(".fiche"),n=e.types[0].name;t.style.backgroundColor=colours[n]}document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("top-of-page");e.addEventListener("click",function(e){e.preventDefault();let t=document.getElementById("header");t.scrollIntoView({behavior:"smooth"})})}),window.addEventListener("scroll",checkSearchBarPosition);